# permission-retriever
Git等で管理している設定ファイルやシェルスクリプトなどのファイル権限を復元するためのツールです。

## 使用方法
```sh
./permretr.sh 対象ディレクトリ
```
引数に権限変更対象のファイル群が格納されたディレクトリを指定して実行します。  
指定したディレクトリ内のファイルについて、設定ファイルに登録されている内容に従って権限を一括で変更します。  

設定ファイルは対象ディレクトリのトップに`.perm`という名前で配置する必要があります。  
Git等のバージョン管理作業用のディレクトリ内のファイル権限を直接変更すると、gitコマンド等による操作が不可になる場合があるため、権限変更用にディレクトリごとファイルのコピーを作成して変更することを推奨します。  
また、実行の際はrootユーザ権限が必要になります。

## 設定ファイル(.perm)フォーマット
設定ファイルの記述形式は下記のとおりです。

### 設定行
設定の記述形式は左から所有者、グループ、権限、ファイル名をセミコロン`;`区切りで記載します。
ファイル名は設定ファイルを起点ディレクトリとした相対パスで記載します。
```
所有者;グループ;権限;ファイル名;
```

|項目名|値|備考|
|:--|:--|:--|
|所有者|ユーザ名 もしくは ユーザID||
|グループ|グループ名 もしくは グループID||
|権限|８進数表記権限|SUIDは省略可|
|ファイル名|対象ファイル名|設定ファイルを起点とした相対パス|

### コメント
行頭が\#で始める行は、コメント行となります。

### 例
```sh
# owner;group;permission;filename;
root;root;0644;path/to/sample.txt;
root;root;0644;sample.txt;
```
